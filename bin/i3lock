#!/bin/bash
# Dependencies:
# imagemagick
# i3lock
# scrot (optional but default)

IMAGE=/tmp/i3lock.png
SCREENSHOT="scrot $IMAGE"

#BLURTYPE="0x5"
#BLURTYPE="0x2"
#BLURTYPE="5x2"
#BLURTYPE="2x8"
#BLURTYPE="2x3"
BLURTYPE="0x3"

BLUR="-blur $BLURTYPE"
#PIXEL="-scale 25% -scale 400%"
#GRAY="-colorspace Gray -gamma 0.7"
#SEPIA="-sepia-tone 80%"
#CHARCOAL="-charcoal 5 "
#PAINT="-paint 1"
#SPREAD="-interpolate nearest -virtual-pixel mirror -spread 5"
#VIGNETTE="-background black -vignette 0x5" 

# Get the screenshot, add the blur and lock the screen with it
$SCREENSHOT
if [[ -e $IMAGE ]]; then
  convert $IMAGE $VIGNETTE $BLUR $PIXEL $SPREAD $CHARCOAL $PAINT $GREY $SEPIA $IMAGE
  i3lock -i $IMAGE
  rm $IMAGE
else
  i3lock
fi
